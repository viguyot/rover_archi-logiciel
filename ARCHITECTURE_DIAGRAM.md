```
# 🏗️ Architecture Mars Rover - Diagramme des Interfaces

┌─────────────────────────────────────────────────────────────────────────────────┐
│                             🎮 MISSION CONTROL (Client)                          │
├─────────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐                  │
│  │ IMissionControl │  │ IMissionOrch.   │  │ IConsoleDisplay │                  │
│  │                 │  │                 │  │ IInputCapture   │                  │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘                  │
└─────────────────────────────────────────────────────────────────────────────────┘
                                      │
                                      │ TCP/HMAC
                                      ▼
┌─────────────────────────────────────────────────────────────────────────────────┐
│                          📡 COUCHE INFRASTRUCTURE                                │
├─────────────────────────────────────────────────────────────────────────────────┤
│ ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐ │
│ │ ICommandParser  │ │ IMapStateManager│ │ IObstacleManager│ │ IConfigManager  │ │
│ └─────────────────┘ └─────────────────┘ └─────────────────┘ └─────────────────┘ │
│ ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐ │
│ │ ILogger         │ │ IMetrics        │ │ IValidator      │ │ IErrorHandler   │ │
│ └─────────────────┘ └─────────────────┘ └─────────────────┘ └─────────────────┘ │
└─────────────────────────────────────────────────────────────────────────────────┘
                                      │
                                      ▼
┌─────────────────────────────────────────────────────────────────────────────────┐
│                           🧠 COUCHE DOMAINE MÉTIER                               │
├─────────────────────────────────────────────────────────────────────────────────┤
│ ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐ │
│ │ IRoverEngine    │ │ ICommandDisp.   │ │ IRoverService   │ │ INavigation     │ │
│ │                 │ │                 │ │ IRoverTcpServer │ │ Calculator      │ │
│ └─────────────────┘ └─────────────────┘ └─────────────────┘ └─────────────────┘ │
│ ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐                     │
│ │ IStateManager   │ │ IStatePersist.  │ │ IEventBus       │                     │
│ └─────────────────┘ └─────────────────┘ └─────────────────┘                     │
└─────────────────────────────────────────────────────────────────────────────────┘
                                      │
                                      ▼
┌─────────────────────────────────────────────────────────────────────────────────┐
│                           📊 COUCHE TYPES PARTAGÉS                               │
├─────────────────────────────────────────────────────────────────────────────────┤
│ ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐ │
│ │ Direction       │ │ Command         │ │ Position        │ │ RoverState      │ │
│ │ MessageType     │ │ TcpMessage      │ │ Obstacle        │ │ Dimensions      │ │
│ └─────────────────┘ └─────────────────┘ └─────────────────┘ └─────────────────┘ │
│ ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐ │
│ │ ISecurityService│ │ ISystemError    │ │ EventType       │ │ ITestScenario   │ │
│ └─────────────────┘ └─────────────────┘ └─────────────────┘ └─────────────────┘ │
└─────────────────────────────────────────────────────────────────────────────────┘
                                      │
                                      │ TCP/HMAC
                                      ▼
┌─────────────────────────────────────────────────────────────────────────────────┐
│                             🤖 ROVER SERVER (Distant)                           │
├─────────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐                  │
│  │ IRoverServer    │  │ IRoverConfig    │  │ IRoverTcpServer │                  │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘                  │
└─────────────────────────────────────────────────────────────────────────────────┘

# 🔄 Flux de communication

Mission Control  ──TCP/HMAC──▶  Rover Server
       │                             │
       ▼                             ▼
ICommandParser ───────────────▶ ICommandDispatcher
       │                             │
       ▼                             ▼
IMapStateManager ◀─── STATE ─── IRoverEngine
       │                             │
       ▼                             ▼
IConsoleDisplay  ◀─── MAP ──── IObstacleManager

# 🛡️ Sécurité transversale

ISecurityService ──HMAC──▶ Tous les messages TCP
IErrorHandler ──────────▶ Gestion robuste des erreurs
IValidator ─────────────▶ Validation des données
ILogger ────────────────▶ Audit et monitoring

# 📊 Gestion d'état

IStateManager ──────────▶ État réactif avec historique
IEventBus ──────────────▶ Communication événementielle
IMetricsCollector ──────▶ Monitoring des performances
```
